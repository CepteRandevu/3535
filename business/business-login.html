<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>İşletme Girişi | Cepterandevu</title>

<style>
  :root {
    --bg: #050816;
    --card: #101528;
    --accent: #22c55e;
    --accent-strong: #16a34a;
    --text: #f9fafb;
    --muted: #9ca3af;
    --border: rgba(148, 163, 184, 0.4);
    --radius-xl: 24px;
    --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.85);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    background: radial-gradient(circle at top, #111827, #020617 55%);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 40px 20px;
  }

  .form-shell {
    width: 100%;
    max-width: 420px;
    background: rgba(15,23,42,0.92);
    padding: 28px;
    border-radius: var(--radius-xl);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-soft);
    backdrop-filter: blur(10px);
  }

  h1 { font-size: 22px; margin-bottom: 6px; }
  p.sub { font-size: 12px; color: var(--muted); margin-bottom: 20px; }

  label {
    font-size: 12px;
    color: var(--muted);
    margin-bottom: 4px;
    display: block;
  }

  input {
    width: 100%;
    padding: 10px 14px;
    background: #0b1120;
    border: 1px solid var(--border);
    border-radius: 12px;
    font-size: 14px;
    color: var(--text);
    margin-bottom: 14px;
    outline: none;
  }

  input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 1px var(--accent);
  }

  .btn-primary {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 14px;
    background: linear-gradient(135deg, var(--accent), var(--accent-strong));
    color: #022c22;
    font-weight: 700;
    cursor: pointer;
    font-size: 14px;
    box-shadow: 0 12px 30px rgba(34,197,94,0.35);
    margin-top: 6px;
  }

  .btn-primary:hover {
    filter: brightness(1.05);
    transform: translateY(-1px);
    box-shadow: 0 14px 35px rgba(34,197,94,0.55);
  }

  .error-box {
    background: rgba(255, 82, 82, 0.15);
    border: 1px solid rgba(255, 82, 82, 0.5);
    padding: 10px;
    border-radius: 10px;
    font-size: 12px;
    color: #ffbaba;
    margin-bottom: 12px;
    display: none;
    text-align: center;
  }

  .link-row {
    margin-top: 14px;
    font-size: 12px;
    text-align: center;
  }

  .link-row a {
    color: var(--accent);
    text-decoration: none;
    font-weight: 500;
  }

  .link-row a:hover {
    text-decoration: underline;
  }
</style>
</head>

<body>
<div class="form-shell">

  <h1>İşletme Girişi</h1>
  <p class="sub">İşletme hesabınız ile giriş yapın.</p>

  <div id="errorBox" class="error-box"></div>

  <label for="email">E-posta</label>
  <input type="email" id="email" placeholder="ornek@isletme.com" />

  <label for="password">Şifre</label>
  <input type="password" id="password" placeholder="Şifreniz" />

  <button id="loginBtn" class="btn-primary">Giriş Yap</button>

  <div class="link-row">
    İşletmeniz yok mu? <a href="business-register.html">Hesap Oluştur</a>
  </div>

</div>

<script type="module">
  import { firebaseConfig } from "./js/firebase-config.js";

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import {
    getAuth,
    signInWithEmailAndPassword
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const btn = document.getElementById("loginBtn");
  const errorBox = document.getElementById("errorBox");

  function showError(t) {
    errorBox.style.display = "block";
    errorBox.textContent = t;
  }

  btn.addEventListener("click", async () => {

    const email = document.getElementById("email").value.trim();
    const pass = document.getElementById("password").value.trim();

    if (!email || !pass)
      return showError("Lütfen tüm alanları doldurun.");

    btn.disabled = true;

    try {
      await signInWithEmailAndPassword(auth, email, pass);

      // başarılı giriş → işletme paneline git
      window.location.href = "business-panel.html";

    } catch (err) {
      console.error(err);
      if (err.code === "auth/wrong-password" || err.code === "auth/user-not-found") {
        showError("E-posta veya şifre hatalı.");
      } else {
        showError("Giriş yapılamadı: " + err.message);
      }
    }

    btn.disabled = false;
  });
</script>

</body>
</html>
